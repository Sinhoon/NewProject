<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.study.web.mapper.LoginMapper">
	<resultMap type="Member" id="MemberResultMap">
		<result property="id" column="uId" />
		<result property="pwd" column="uPwd" />
		<result property="cls" column="uClass" />
		<result property="name" column="uName" />
		<result property="lock" column="uLock" />
	</resultMap>

	<!-- 비밀번호 일치 여부 -->
	<select id="getLogin" resultMap="MemberResultMap">
		SELECT * FROM user
		WHERE uId = #{id}
		AND uPwd = #{pwd}
	</select>

	<!-- 아이디 존재 여부 -->
	<select id="getIdchk" resultMap="MemberResultMap" parameterType="string">
		SELECT * FROM user
		WHERE uId = #{id}	
	</select>
	
	<!-- 비밀번호 틀린횟수  -->
	<update id="setLock" parameterType="string">
        update user set
            uLock = uLock + 1
        where uId = #{id}
    </update> 
    
    
</mapper>
